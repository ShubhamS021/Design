<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Meta -->
    <meta name="description" content="">
    <meta name="author" content="ThemePixels">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="../assets/img/favicon.png">

    <title>Dwell</title>

    <!-- Vendor CSS -->
    <link href="../lib/remixicon/fonts/remixicon.css" rel="stylesheet">
    <link href="../lib/line-awesome/css/line-awesome.min.css" rel="stylesheet">
    <link href="../lib/quill/quill.core.css" rel="stylesheet">
    <link href="../lib/quill/quill.snow.css" rel="stylesheet">

    <!-- Template CSS -->
    <link rel="stylesheet" href="../assets/css/core.min.css">
    <link rel="stylesheet" href="../assets/css/main.min.css">
  </head>
  <body>

    <div class="content content-bulk">
      <div class="container-fluid">
        <div class="content-header mg-b-30">
          <div class="mg-r-auto">
            <h3 class="content-title mg-b-3">Bulk Email</h3>
            <span class="content-text">Compose email blast for selected recipients</span>
          </div>
        </div><!-- content-header -->
        <div class="row">
          <div class="col-9">
            <div class="card card-bulk-compose">
              <div class="card-header">
                <div class="mg-r-auto">
                  <h6 class="card-title">Compose Message</h6>
                </div>
                <nav class="nav nav-circle">
                  <a href="email-bulk.html" class="nav-link done">1</a>
                  <a href="#" class="nav-link active">2</a>
                </nav>
              </div><!-- card-header -->
              <div class="card-body">
                <div class="form-group">
                  <strong class="mg-r-5">From:</strong> Ethan Lacey (ethan@liftlytics.com)
                </div><!-- form-group -->
                <div class="form-group">
                  <input type="text" class="form-control" placeholder="Enter subject title">
                </div><!-- form-group -->

                <div id="composeEditor"></div>
              </div><!-- card-body -->
              <div class="card-footer">
                <a href="email-bulk.html" class="btn btn-white">Back</a>
                <a href="#modalConfirmEmail" data-toggle="modal" class="btn btn-primary">Ready to send?</a>
              </div><!-- card-footer -->
            </div><!-- card -->
          </div><!-- col -->
          <div class="col">
            <div class="card card-bulk-info">
              <div class="card-body">
                <h6 class="card-title">Recipients</h6>
                <p class="card-text">When you send the email blast, it will be delivered to:</p>
                <h1 class="card-number">15</h1>
                <label class="card-label">Number of recipients</label>
                <small>Max recipients: 800</small>
              </div><!-- card-body -->
              <div class="card-footer">
                <p>See a preview of email before you send it out</p>
                <button data-toggle="modal" data-target="#modalPreviewEmail" class="btn btn-block">Preview Email</button>
              </div><!-- card-footer -->
            </div><!-- card -->
          </div><!-- col -->
        </div><!-- row -->
      </div><!-- container-fluid -->
    </div><!-- content -->

    <div class="modal modal-preview-email fade" id="modalPreviewEmail" tabindex="-1" aria-labelledby="modalPreviewEmailLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalPreviewEmailLabel">Preview Email</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>Hey <strong>{{Lead firstname}}</strong></p>
            <p>Here's a big promo we're running...</p>
            <p>Best regards,</p>
            <p>
              <strong>{{Property name}}</strong><br>
              <strong>{{Property address}}</strong>
            </p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-white" data-dismiss="modal">Edit</button>
            <button id="modalSend" type="button" class="btn btn-primary">Ready to send?</button>
          </div>
        </div><!-- modal-content -->
      </div><!-- modal-dialog -->
    </div><!-- modal -->

    <div class="modal modal-preview-email fade" id="modalConfirmEmail" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-sending modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body modal-body-sending">
            <i class="ri-mail-send-line"></i>
            <h6 class="card-title">Ready to send?</h6>
            <div class="card-email-info">
              <h6>Here's a good deal on summer apartments!</h6>
              <p>Number of recipients: 15</p>
            </div>
            <div class="card-btn-group">
              <button type="button" class="btn btn-white" data-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-primary">Send Email</button>
            </div>
          </div><!-- modal-body -->
        </div><!-- modal-content -->
      </div><!-- modal-dialog -->
    </div><!-- modal -->

    <div class="modal modal-preview-email" id="modalSendSuccess" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-sending modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body modal-body-sending">
            <i class="ri-mail-check-line text-success"></i>
            <h1 class="confirm-title mg-b-20">Success</h1>
            <p class="confirm-text">Your email bulk has been initiated successfully.</p>
            <div class="mg-t-20">
              <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
            </div>
          </div><!-- modal-body -->
        </div><!-- modal-content -->
      </div><!-- modal-dialog -->
    </div><!-- modal -->

    <div class="modal modal-preview-email" id="modalSendFailed" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-sending modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body modal-body-sending">
            <i class="ri-mail-close-line text-danger"></i>
            <h1 class="confirm-title mg-b-20">Failed</h1>
            <p class="confirm-text text-center">An error has occured while initiating your email blast.<br>Please try again later.</p>
            <div class="mg-t-20">
              <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
            </div>
          </div><!-- modal-body -->
        </div><!-- modal-content -->
      </div><!-- modal-dialog -->
    </div><!-- modal -->

    <script src="../lib/jquery/jquery.min.js"></script>
    <script src="../lib/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../lib/feather-icons/feather.min.js"></script>
    <script src="../lib/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="../lib/quill/quill.min.js"></script>

    <script src="../assets/js/script.js"></script>
    <script>
      $(document).ready(function() {
        'use strict'

        $('.nav-item-communication .nav-link').addClass('active');

        var quill2 = new Quill('#composeEditor', {
          modules: {
            toolbar: [
              ['bold', 'italic'],
              ['link', 'blockquote', 'code-block', 'image'],
              [{ list: 'ordered' }, { list: 'bullet' }]
            ]
          },
          placeholder: 'Write some message...',
          theme: 'snow'
        });

        $('#modalSend').on('click', function(e){
          e.preventDefault();
          $('#modalPreviewEmail').modal('hide');
          $('#modalConfirmEmail').modal('show');
        });

        // For displaying modal directly from url
        // For demo use only
        $.urlParam = function(name){
        	var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
        	return results[1] || 0;
        }

        if($.urlParam('alert')) {
          if($.urlParam('alert') === 'success') {
            $('#modalSendSuccess').modal('show');
          }

          if($.urlParam('alert') === 'failed') {
            $('#modalSendFailed').modal('show');
          }
        }

      });
    </script>
  </body>
</html>
