<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Meta -->
    <meta name="description" content="">
    <meta name="author" content="ThemePixels">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="../assets/img/favicon.png">

    <title>Dwell</title>

    <!-- Vendor CSS -->
    <link href="../lib/remixicon/fonts/remixicon.css" rel="stylesheet">
    <link href="../lib/line-awesome/css/line-awesome.min.css" rel="stylesheet">
    <link href="../lib/select2/css/select2.min.css" rel="stylesheet">

    <!-- Template CSS -->
    <link rel="stylesheet" href="../assets/css/core.min.css">
    <link rel="stylesheet" href="../assets/css/main.min.css">
  </head>
  <body class="page-settings">

    <div class="content">
      <div class="container-fluid">
        <div class="content-header align-items-center mg-b-30">
          <div class="mg-r-auto">
            <h4 class="content-title mg-b-0">Property Settings</h4>
          </div>
        </div><!-- content-header -->
        <div class="content-body content-body-settings">
          <div class="settings-sidebar">
            <label class="content-label">General Settings</label>
            <nav class="nav">
              <a href="../templates/settings.html" class="nav-link"><i class="ri-shield-user-line"></i> Assignment Rules</a>
              <a href="../templates/settings-email.html" class="nav-link"><i class="ri-mail-line"></i> Email templates</a>
              <a href="../templates/settings-calendar.html" class="nav-link"><i class="ri-calendar-todo-line"></i> Email &amp; Calendar sync</a>
              <a href="../templates/settings-business.html" class="nav-link"><i class="ri-time-line"></i> Business hours</a>
              <a href="community-features.html" class="nav-link"><i class="ri-community-line"></i> Community features</a>
            </nav>

            <hr class="mg-y-15 op-0">

            <label class="content-label">Report Settings</label>
            <nav class="nav">
              <a href="../templates/settings-competitors.html" class="nav-link"><i class="ri-group-line"></i> Competitors</a>
              <a href="../templates/settings-paid-sources.html" class="nav-link"><i class="ri-wallet-3-line"></i> Paid sources</a>
              <a href="../templates/settings-budget.html" class="nav-link"><i class="ri-bank-card-2-line"></i> Paid source budgets</a>
            </nav>

            <hr class="mg-y-15 op-0">

            <label class="content-label">Leasing</label>
            <nav class="nav">
              <a href="../templates/settings-lease.html" class="nav-link"><i class="ri-community-line"></i> Lease Defaults</a>
              <a href="../templates/settings-policies.html" class="nav-link"><i class="ri-article-line"></i> Property Policies</a>
              <a href="../templates/settings-rentable.html" class="nav-link"><i class="ri-handbag-line"></i> Rentable Items</a>
              <a href="../templates/settings-screening.html" class="nav-link"><i class="ri-survey-line"></i> Screening Criteria</a>
              <a href="../templates/settings-addenda.html" class="nav-link"><i class="ri-file-list-3-line"></i> Addenda</a>
              <a href="pricing-duration.html" class="nav-link"><i class="ri-community-line"></i> Duration Pricing</a>
            </nav>

            <hr class="mg-y-15 op-0">

            <label class="content-label">Communication</label>
            <nav class="nav">
              <a href="../templates/settings-call-block.html" class="nav-link"><i class="ri-lock-line"></i> Call Block List</a>
            </nav>

            <hr class="mg-y-15 op-0">

            <label class="content-label">IVR Settings</label>
            <nav class="nav">
              <a href="vendors-list.html" class="nav-link"><i class="ri-contacts-line"></i> Vendors List</a>
              <a href="default-assignees.html" class="nav-link"><i class="ri-user-star-line"></i> Default Assignees</a>
              <a href="oncall-schedule.html" class="nav-link active"><i class="ri-calendar-event-line"></i> On-Call Schedule</a>
              <a href="leasing-prompt.html" class="nav-link"><i class="ri-user-voice-line"></i> Leasing Prompt</a>
            </nav>
          </div><!-- settings-sidebar -->
          <div class="settings-body d-flex flex-column">
            <h5 class="content-title-sm">On-Call Schedule</h5>
            <p class="content-text">Manage and schedule which team members and vendors are on-call during office hours and after hours for each IVR request.</p>

            <hr class="op-0">

            <div class="settings-group d-flex align-items-center justify-content-between">
              <div id="datePicker" class="input-group">
                <button class="btn btn-white btn-icon"><i class="ri-arrow-left-s-line"></i></button>
                <input type="text" class="form-control" name="datepicker" value="Jun 27 - Jul 03" readonly>
                <div></div>
                <a href="" class="link link-edit"><i class="ri-pencil-line"></i></a>
                <button class="btn btn-white btn-icon"><i class="ri-arrow-right-s-line"></i></button>
              </div><!-- input-group -->
              <div id="settingsRightOption">
                <select class="custom-select wd-200 pd-l-5">
                  <option value="1">Emergency Maintenance</option>
                  <option value="2">Courtesy Patrol</option>
                  <option value="3">Routine Maintenance</option>
                  <option value="4">Leasing</option>
                  <option value="5">General</option>
                </select>
                <a href="#modalBulkEdit" data-toggle="modal" class="btn btn-primary d-none">Bulk Edit</a>
              </div>
            </div>

            <hr class="op-0">

            <table class="table table-oncall">
              <thead>
                <tr>
                  <th class="wd-5p"></th>
                  <th class="wd-35p"></th>
                  <th class="wd-30p">Assignee for Office Hours</th>
                  <th class="wd-30p">Assignee for After Hours</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="cc1">
                      <label class="custom-control-label" for="cc1"></label>
                    </div>
                  </td>
                  <td>Sunday, Jun 27, 2021</td>
                  <td>
                    <select class="custom-select">
                      <option value=""></option>
                    </select>
                  </td>
                  <td>
                    <select class="custom-select">
                      <option value=""></option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="cc2">
                      <label class="custom-control-label" for="cc2"></label>
                    </div>
                  </td>
                  <td>Monday, Jun 28, 2021</td>
                  <td>
                    <select class="custom-select">
                      <option value=""></option>
                    </select>
                  </td>
                  <td>
                    <select class="custom-select">
                      <option value=""></option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="cc3">
                      <label class="custom-control-label" for="cc3"></label>
                    </div>
                  </td>
                  <td><strong>Tuesday, Jun 29, 2021</strong></td>
                  <td>
                    <select class="custom-select">
                      <option value=""></option>
                    </select>
                  </td>
                  <td>
                    <select class="custom-select">
                      <option value=""></option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="cc4">
                      <label class="custom-control-label" for="cc4"></label>
                    </div>
                  </td>
                  <td>Wednesday, Jun 30, 2021</td>
                  <td>
                    <select class="custom-select">
                      <option value=""></option>
                    </select>
                  </td>
                  <td>
                    <select class="custom-select">
                      <option value=""></option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="cc5">
                      <label class="custom-control-label" for="cc5"></label>
                    </div>
                  </td>
                  <td>Thursday, Jul 01, 2021</td>
                  <td>
                    <select class="custom-select">
                      <option value=""></option>
                    </select>
                  </td>
                  <td>
                    <select class="custom-select">
                      <option value=""></option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="cc6">
                      <label class="custom-control-label" for="cc6"></label>
                    </div>
                  </td>
                  <td>Friday, Jul 02, 2021</td>
                  <td>
                    <select class="custom-select">
                      <option value=""></option>
                    </select>
                  </td>
                  <td>
                    <select class="custom-select">
                      <option value=""></option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="cc7">
                      <label class="custom-control-label" for="cc7"></label>
                    </div>
                  </td>
                  <td>Saturday, Jul 03, 2021</td>
                  <td>
                    <select class="custom-select">
                      <option value=""></option>
                    </select>
                  </td>
                  <td>
                    <select class="custom-select">
                      <option value=""></option>
                    </select>
                  </td>
                </tr>
              </tbody>
            </table>
          </div><!-- settings-body -->
        </div><!-- content-body -->
      </div><!-- container -->
    </div><!-- content -->

    <div class="modal modal-more-filter fade" id="modalBulkEdit" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <div>
              <h5 class="modal-title mg-b-0-f">Bulk Edit Assignees (3)</h5>
            </div>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="ri-close-line"></i></button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label class="form-label">Time of day to update</label>
              <select class="custom-select">
                  <option value="">Choose one</option>
                  <option value="1">Office Hours</option>
                  <option value="2">After Hours</option>
                  <option value="3">Office Hours and After Hours</option>
                </select>
            </div><!-- form-group -->
            <div class="form-group">
              <label class="form-label">Assignee for Office Hours</label>
              <select class="custom-select">
                <option value="">Choose assignee</option>
                <optgroup label="Property Team Members">
                  <option value="1a">Team Member A</option>
                  <option value="1b">Team Member B</option>
                  <option value="1c">Team Member C</option>
                  <option value="1d">Team Member D</option>
                </optgroup>
                <optgroup label="Vendors">
                  <option value="2a">Vendor A</option>
                  <option value="2b">Vendor B</option>
                  <option value="2c">Vendor C</option>
                  <option value="2d">Vendor D</option>
                </optgroup>
              </select>
            </div><!-- form-group -->
          </div><!-- modal-body -->
          <div class="modal-footer">
            <button type="button" class="btn btn-white" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" data-dismiss="modal">Save changes</button>
          </div>
        </div><!-- modal-content -->
      </div><!-- modal-dialog -->
    </div><!-- modal -->

    <span id="startDate"></span> - <span id="endDate"></span>

    <script src="../lib/jquery/jquery.min.js"></script>
    <script src="../lib/jqueryui/jquery-ui.min.js"></script>
    <script src="../lib/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../lib/feather-icons/feather.min.js"></script>
    <script src="../lib/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="../lib/select2/js/select2.min.js"></script>

    <script src="../assets/js/script.js"></script>
    <script src="../assets/js/weekpicker.js"></script>
    <script>
      $(document).ready(function() {
        'use strict'

        $('.select2').select2({
          minimumResultsForSearch: Infinity,
          width: '100%'
        });

        $('#assignTask').on('change', function(e){
          var v = $(this).val();
          if(v != 1) {
            $('#ruleTour, #ruleEmail, #ruleCalls').removeClass('d-none');
          } else {
            $('#ruleTour, #ruleEmail, #ruleCalls').addClass('d-none');
          }
        });

        $('.select2-by').on('change', function(e){
          var v = $(this).val();
          var t = $(e.currentTarget).closest('.rule-col');
          t.siblings('.rule-col-to').toggleClass('d-none', (v >= 2));
          t.siblings('.rule-col-user').toggleClass('d-none', (v >= 2));

          $(e.currentTarget).closest('.rule-wrapper').next().toggleClass('d-none', (v != 2));
        });

        $('#prosBy').on('change', function(){
          $('#dayPros').toggleClass('d-none', ($(this).val() == '1'));
          $(this).closest('.rule-col').siblings().toggleClass('d-none', ($(this).val() != '1'));
        });

        $('.select2-to').on('change', function() {
          var u = $(this).closest('.rule-col').next().find('.select2-user');
          if($(this).val() == '1') {
            u.val(['js','jc','el']).trigger('change');
          } else if($(this).val() == '2') {
            u.val(['js','jc']).trigger('change');
          } else {
            u.val(null).trigger('change');
          }
        });

        $('.custom-control-input').on('click', function(e){
          var c = $(this).is(':checked');
          var s = $(this).closest('tr').siblings().find('.custom-control-input:checked');
          if(c) {
            if(s.length > 0) {
              $('#settingsRightOption .btn').removeClass('d-none');
              $('#settingsRightOption .custom-select').addClass('d-none');
            }
          } else {
            if(s.length <= 1) {
              $('#settingsRightOption .btn').addClass('d-none');
              $('#settingsRightOption .custom-select').removeClass('d-none');
            }
          }
        });

        $('.link-edit').on('click', function(e){
          e.preventDefault();
          $('#datePicker .form-control').focus();
        });

        $('#datePicker .form-control').weekpicker({
          dateFormat: 'M dd',
          showOtherMonths: true,
          selectOtherMonths: true,
          onSelect: function(dateText, inst) {
            var date = $(this).datepicker('getDate');
            var startDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay());
            var endDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay() + 6);

            var dateFormat = inst.settings.dateFormat || $.datepicker._defaults.dateFormat;
            var dr = $.datepicker.formatDate(dateFormat, startDate, inst.settings) + ' - ' + $.datepicker.formatDate(dateFormat, endDate, inst.settings);
            $(this).val(dr);
          },
        });

        $('#datePicker .btn:first-child').on('click', function(){
          var date = $('#datePicker .form-control').datepicker('getDate');
          var startDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - 7);
          var endDate = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate() - startDate.getDay() + 6);

          var dr = $.datepicker.formatDate('M dd', startDate) + ' - ' + $.datepicker.formatDate('M dd', endDate);
          $('#datePicker .form-control').val(dr);
        });

        $('#datePicker .btn:last-child').on('click', function(){
          var date = $('#datePicker .form-control').datepicker('getDate');
          var startDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay() + 7);
          var endDate = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate() - startDate.getDay() + 6);

          var dr = $.datepicker.formatDate('M dd', startDate) + ' - ' + $.datepicker.formatDate('M dd', endDate);
          $('#datePicker .form-control').val(dr);
        });

      });
    </script>
  </body>
</html>
